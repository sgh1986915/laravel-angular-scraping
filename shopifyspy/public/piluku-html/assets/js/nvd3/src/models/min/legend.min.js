nv.models.legend=function(){"use strict";function t(c){return c.each(function(t){var c=n-e.left-e.right,f=d3.select(this),g=f.selectAll("g.nv-legend").data([t]);g.enter().append("g").attr("class","nvd3 nv-legend").append("g");var h=g.select("g");g.attr("transform","translate("+e.left+","+e.top+")");var p=h.selectAll(".nv-series").data(function(t){return t}),m=p.enter().append("g").attr("class","nv-series").on("mouseover",function(t,e){d.legendMouseover(t,e)}).on("mouseout",function(t,e){d.legendMouseout(t,e)}).on("click",function(e,n){d.legendClick(e,n),s&&(u?(t.forEach(function(t){t.disabled=!0}),e.disabled=!1):(e.disabled=!e.disabled,t.every(function(t){return t.disabled})&&t.forEach(function(t){t.disabled=!1})),d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))}).on("dblclick",function(e,n){d.legendDblclick(e,n),s&&(t.forEach(function(t){t.disabled=!0}),e.disabled=!1,d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))});if(m.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),m.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),p.classed("disabled",function(t){return t.disabled}),p.exit().remove(),p.select("circle").style("fill",function(t,e){return t.color||a(t,e)}).style("stroke",function(t,e){return t.color||a(t,e)}),p.select("text").text(o),l){var v=[];p.each(function(){var t,e=d3.select(this).select("text");try{t=e.node().getComputedTextLength()}catch(n){t=nv.utils.calcApproxTextWidth(e)}v.push(t+28)});for(var b=0,x=0,y=[];c>x&&b<v.length;)y[b]=v[b],x+=v[b++];for(0===b&&(b=1);x>c&&b>1;){y=[],b--;for(var k=0;k<v.length;k++)v[k]>(y[k%b]||0)&&(y[k%b]=v[k]);x=y.reduce(function(t,e){return t+e})}for(var C=[],M=0,A=0;b>M;M++)C[M]=A,A+=y[M];p.attr("transform",function(t,e){return"translate("+C[e%b]+","+(5+20*Math.floor(e/b))+")"}),i?h.attr("transform","translate("+(n-e.right-x)+","+e.top+")"):h.attr("transform","translate(0,"+e.top+")"),r=e.top+e.bottom+20*Math.ceil(v.length/b)}else{var E,T=5,w=5,D=0;p.attr("transform",function(){var t=d3.select(this).select("text").node().getComputedTextLength()+28;return E=w,n<e.left+e.right+E+t&&(w=E=5,T+=20),w+=t,w>D&&(D=w),"translate("+E+","+T+")"}),h.attr("transform","translate("+(n-e.right-D)+","+e.top+")"),r=e.top+e.bottom+T+15}}),t}var e={top:5,right:0,bottom:5,left:0},n=400,r=20,o=function(t){return t.key},a=nv.utils.defaultColor(),l=!0,i=!0,s=!0,u=!1,d=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return t.dispatch=d,t.options=nv.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(e){return arguments.length?(r=e,t):r},t.key=function(e){return arguments.length?(o=e,t):o},t.color=function(e){return arguments.length?(a=nv.utils.getColor(e),t):a},t.align=function(e){return arguments.length?(l=e,t):l},t.rightAlign=function(e){return arguments.length?(i=e,t):i},t.updateState=function(e){return arguments.length?(s=e,t):s},t.radioButtonMode=function(e){return arguments.length?(u=e,t):u},t};