!function(){function t(t){return t[0]}function n(t){return t[1]}function r(t,n,r){return"offset"==r?function(r){return"translate(0,"+(r+(0>r)-t)*n+")"}:function(r){return(0>r?"scale(1,-1)":"")+"translate(0,"+(r-t)*n+")"}}d3.horizon=function(){function i(t){t.each(function(t){var n,i,_,p=d3.select(this),m=1/0,y=-1/0,v=-1/0,x=t.map(function(t,n){var r=c.call(this,t,n),e=s.call(this,t,n);return m>r&&(m=r),r>y&&(y=r),-e>v&&(v=-e),e>v&&(v=e),[r,e]}),b=d3.scale.linear().domain([m,y]).range([0,h]),w=d3.scale.linear().domain([0,v]).range([0,d*u]),z=r(u,d,l);this.__chart__?(n=this.__chart__.x,i=this.__chart__.y,t0=this.__chart__.t,_=this.__chart__.id):(n=b.copy(),i=w.copy(),t0=z,_=++a);var A=p.selectAll("defs").data([null]);A.enter().append("defs").append("clipPath").attr("id","d3_horizon_clip"+_).append("rect").attr("width",h).attr("height",d),A.select("rect").transition().duration(f).attr("width",h).attr("height",d),p.selectAll("g").data([null]).enter().append("g").attr("clip-path","url(#d3_horizon_clip"+_+")");var N=p.select("g").selectAll("path").data(d3.range(-1,-u-1,-1).concat(d3.range(1,u+1)),Number),P=e.interpolate(o).x(function(t){return n(t[0])}).y0(d*u).y1(function(t){return d*u-i(t[1])})(x),j=e.x(function(t){return b(t[0])}).y1(function(t){return d*u-w(t[1])})(x);N.enter().append("path").style("fill",g).attr("transform",t0).attr("d",P),N.transition().duration(f).style("fill",g).attr("transform",z).attr("d",j),N.exit().transition().duration(f).attr("transform",z).attr("d",j).remove(),this.__chart__={x:b,y:w,t:z,id:_}}),d3.timer.flush()}var u=1,l="offset",o="linear",c=t,s=n,h=960,d=40,f=0,g=d3.scale.linear().domain([-1,0,1]).range(["#d62728","#fff","#1f77b4"]);return i.duration=function(t){return arguments.length?(f=+t,i):f},i.bands=function(t){return arguments.length?(u=+t,g.domain([-u,0,u]),i):u},i.mode=function(t){return arguments.length?(l=t+"",i):l},i.colors=function(t){return arguments.length?(g.range(t),i):g.range()},i.interpolate=function(t){return arguments.length?(o=t+"",i):o},i.x=function(t){return arguments.length?(c=t,i):c},i.y=function(t){return arguments.length?(s=t,i):s},i.width=function(t){return arguments.length?(h=+t,i):h},i.height=function(t){return arguments.length?(d=+t,i):d},i};var e=d3.svg.area(),a=0}();