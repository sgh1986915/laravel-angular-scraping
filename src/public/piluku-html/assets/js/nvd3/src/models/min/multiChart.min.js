nv.models.multiChart=function(){"use strict";function t(p){return p.each(function(p){var W=d3.select(this),M=this;t.update=function(){W.transition().call(t)},t.container=this;var H=(r||parseInt(W.style("width"))||960)-i.left-i.right,D=(l||parseInt(W.style("height"))||400)-i.top-i.bottom,C=p.filter(function(t){return!t.disabled&&"line"==t.type&&1==t.yAxis}),I=p.filter(function(t){return!t.disabled&&"line"==t.type&&2==t.yAxis}),K=p.filter(function(t){return!t.disabled&&"bar"==t.type&&1==t.yAxis}),z=p.filter(function(t){return!t.disabled&&"bar"==t.type&&2==t.yAxis}),F=p.filter(function(t){return!t.disabled&&"area"==t.type&&1==t.yAxis}),T=p.filter(function(t){return!t.disabled&&"area"==t.type&&2==t.yAxis}),B=p.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})}),L=p.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})});e.domain(d3.extent(d3.merge(B.concat(L)),function(t){return t.x})).range([0,H]);var P=W.selectAll("g.wrap.multiChart").data([p]),X=P.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");X.append("g").attr("class","x axis"),X.append("g").attr("class","y1 axis"),X.append("g").attr("class","y2 axis"),X.append("g").attr("class","lines1Wrap"),X.append("g").attr("class","lines2Wrap"),X.append("g").attr("class","bars1Wrap"),X.append("g").attr("class","bars2Wrap"),X.append("g").attr("class","stack1Wrap"),X.append("g").attr("class","stack2Wrap"),X.append("g").attr("class","legendWrap");var Y=P.select("g");s&&(A.width(H/2),Y.select(".legendWrap").datum(p.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(A),i.top!=A.height()&&(i.top=A.height(),D=(l||parseInt(W.style("height"))||400)-i.top-i.bottom),Y.select(".legendWrap").attr("transform","translate("+H/2+","+-i.top+")")),h.width(H).height(D).interpolate("monotone").color(p.map(function(t,e){return t.color||a[e%a.length]}).filter(function(t,e){return!p[e].disabled&&1==p[e].yAxis&&"line"==p[e].type})),f.width(H).height(D).interpolate("monotone").color(p.map(function(t,e){return t.color||a[e%a.length]}).filter(function(t,e){return!p[e].disabled&&2==p[e].yAxis&&"line"==p[e].type})),m.width(H).height(D).color(p.map(function(t,e){return t.color||a[e%a.length]}).filter(function(t,e){return!p[e].disabled&&1==p[e].yAxis&&"bar"==p[e].type})),g.width(H).height(D).color(p.map(function(t,e){return t.color||a[e%a.length]}).filter(function(t,e){return!p[e].disabled&&2==p[e].yAxis&&"bar"==p[e].type})),y.width(H).height(D).color(p.map(function(t,e){return t.color||a[e%a.length]}).filter(function(t,e){return!p[e].disabled&&1==p[e].yAxis&&"area"==p[e].type})),x.width(H).height(D).color(p.map(function(t,e){return t.color||a[e%a.length]}).filter(function(t,e){return!p[e].disabled&&2==p[e].yAxis&&"area"==p[e].type})),Y.attr("transform","translate("+i.left+","+i.top+")");var N=Y.select(".lines1Wrap").datum(C),j=Y.select(".bars1Wrap").datum(K),q=Y.select(".stack1Wrap").datum(F),E=Y.select(".lines2Wrap").datum(I),G=Y.select(".bars2Wrap").datum(z),J=Y.select(".stack2Wrap").datum(T),O=F.length?F.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],Q=T.length?T.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];u.domain(n||d3.extent(d3.merge(B).concat(O),function(t){return t.y})).range([0,D]),d.domain(o||d3.extent(d3.merge(L).concat(Q),function(t){return t.y})).range([0,D]),h.yDomain(u.domain()),m.yDomain(u.domain()),y.yDomain(u.domain()),f.yDomain(d.domain()),g.yDomain(d.domain()),x.yDomain(d.domain()),F.length&&d3.transition(q).call(y),T.length&&d3.transition(J).call(x),K.length&&d3.transition(j).call(m),z.length&&d3.transition(G).call(g),C.length&&d3.transition(N).call(h),I.length&&d3.transition(E).call(f),v.ticks(H/100).tickSize(-D,0),Y.select(".x.axis").attr("transform","translate(0,"+D+")"),d3.transition(Y.select(".x.axis")).call(v),b.ticks(D/36).tickSize(-H,0),d3.transition(Y.select(".y1.axis")).call(b),w.ticks(D/36).tickSize(-H,0),d3.transition(Y.select(".y2.axis")).call(w),Y.select(".y2.axis").style("opacity",L.length?1:0).attr("transform","translate("+e.range()[1]+",0)"),A.dispatch.on("stateChange",function(){t.update()}),k.on("tooltipShow",function(t){c&&S(t,M.parentNode)})}),t}var e,n,o,i={top:30,right:20,bottom:50,left:60},a=d3.scale.category20().range(),r=null,l=null,s=!0,c=!0,p=function(t,e,n){return"<h3>"+t+"</h3>"+"<p>"+n+" at "+e+"</p>"},e=d3.scale.linear(),u=d3.scale.linear(),d=d3.scale.linear(),h=nv.models.line().yScale(u),f=nv.models.line().yScale(d),m=nv.models.multiBar().stacked(!1).yScale(u),g=nv.models.multiBar().stacked(!1).yScale(d),y=nv.models.stackedArea().yScale(u),x=nv.models.stackedArea().yScale(d),v=nv.models.axis().scale(e).orient("bottom").tickPadding(5),b=nv.models.axis().scale(u).orient("left"),w=nv.models.axis().scale(d).orient("right"),A=nv.models.legend().height(30),k=d3.dispatch("tooltipShow","tooltipHide"),S=function(e,n){var o=e.pos[0]+(n.offsetLeft||0),i=e.pos[1]+(n.offsetTop||0),a=v.tickFormat()(h.x()(e.point,e.pointIndex)),r=(2==e.series.yAxis?w:b).tickFormat()(h.y()(e.point,e.pointIndex)),l=p(e.series.key,a,r,e,t);nv.tooltip.show([o,i],l,void 0,void 0,n.offsetParent)};return h.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],k.tooltipShow(t)}),h.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],k.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],k.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],k.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),y.dispatch.on("tooltipShow",function(t){return Math.round(100*y.y()(t.point))?(t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],k.tooltipShow(t),void 0):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),y.dispatch.on("tooltipHide",function(t){k.tooltipHide(t)}),x.dispatch.on("tooltipShow",function(t){return Math.round(100*x.y()(t.point))?(t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],k.tooltipShow(t),void 0):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),x.dispatch.on("tooltipHide",function(t){k.tooltipHide(t)}),h.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],k.tooltipShow(t)}),h.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],k.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),k.on("tooltipHide",function(){c&&nv.tooltip.cleanup()}),t.dispatch=k,t.lines1=h,t.lines2=f,t.bars1=m,t.bars2=g,t.stack1=y,t.stack2=x,t.xAxis=v,t.yAxis1=b,t.yAxis2=w,t.options=nv.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(getX=e,h.x(e),m.x(e),t):getX},t.y=function(e){return arguments.length?(getY=e,h.y(e),m.y(e),t):getY},t.yDomain1=function(e){return arguments.length?(n=e,t):n},t.yDomain2=function(e){return arguments.length?(o=e,t):o},t.margin=function(e){return arguments.length?(i=e,t):i},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(a=e,A.color(e),t):a},t.showLegend=function(e){return arguments.length?(s=e,t):s},t.tooltips=function(e){return arguments.length?(c=e,t):c},t.tooltipContent=function(e){return arguments.length?(p=e,t):p},t};