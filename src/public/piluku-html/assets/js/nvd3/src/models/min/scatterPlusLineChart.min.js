nv.models.scatterPlusLineChart=function(){"use strict";function t(W){return W.each(function(W){function A(){if(w)return B.select(".nv-point-paths").style("pointer-events","all"),!1;B.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);p.distortion(k).focus(t[0]),f.distortion(k).focus(t[1]),B.select(".nv-scatterWrap").datum(W.filter(function(t){return!t.disabled})).call(e),m&&B.select(".nv-x.nv-axis").call(n),y&&B.select(".nv-y.nv-axis").call(i),B.select(".nv-distributionX").datum(W.filter(function(t){return!t.disabled})).call(o),B.select(".nv-distributionY").datum(W.filter(function(t){return!t.disabled})).call(a)}var C=d3.select(this),M=this,P=(c||parseInt(C.style("width"))||960)-l.left-l.right,T=(d||parseInt(C.style("height"))||400)-l.top-l.bottom;if(t.update=function(){C.transition().duration(Y).call(t)},t.container=this,D.disabled=W.map(function(t){return!!t.disabled}),!I){var N;I={};for(N in D)I[N]=D[N]instanceof Array?D[N].slice(0):D[N]}if(!(W&&W.length&&W.filter(function(t){return t.values.length}).length)){var V=C.selectAll(".nv-noData").data([z]);return V.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),V.attr("x",l.left+P/2).attr("y",l.top+T/2).text(function(t){return t}),t}C.selectAll(".nv-noData").remove(),p=e.xScale(),f=e.yScale(),X=X||p,F=F||f;var E=C.selectAll("g.nv-wrap.nv-scatterChart").data([W]),j=E.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),q=j.append("g"),B=E.select("g");q.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),q.append("g").attr("class","nv-x nv-axis"),q.append("g").attr("class","nv-y nv-axis"),q.append("g").attr("class","nv-scatterWrap"),q.append("g").attr("class","nv-regressionLinesWrap"),q.append("g").attr("class","nv-distWrap"),q.append("g").attr("class","nv-legendWrap"),q.append("g").attr("class","nv-controlsWrap"),E.attr("transform","translate("+l.left+","+l.top+")"),x&&B.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),h&&(r.width(P/2),E.select(".nv-legendWrap").datum(W).call(r),l.top!=r.height()&&(l.top=r.height(),T=(d||parseInt(C.style("height"))||400)-l.top-l.bottom),E.select(".nv-legendWrap").attr("transform","translate("+P/2+","+-l.top+")")),b&&(s.width(180).color(["#444"]),B.select(".nv-controlsWrap").datum(H).attr("transform","translate(0,"+-l.top+")").call(s)),e.width(P).height(T).color(W.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!W[e].disabled})),E.select(".nv-scatterWrap").datum(W.filter(function(t){return!t.disabled})).call(e),E.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var G=E.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});G.enter().append("g").attr("class","nv-regLines");var J=G.selectAll(".nv-regLine").data(function(t){return[t]});J.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),J.transition().attr("x1",p.range()[0]).attr("x2",p.range()[1]).attr("y1",function(t){return f(p.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t){return f(p.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return u(t,n)}).style("stroke-opacity",function(t){return t.disabled||"undefined"==typeof t.slope||"undefined"==typeof t.intercept?0:1}),m&&(n.scale(p).ticks(n.ticks()?n.ticks():P/100).tickSize(-T,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(n)),y&&(i.scale(f).ticks(i.ticks()?i.ticks():T/36).tickSize(-P,0),B.select(".nv-y.nv-axis").call(i)),g&&(o.getData(e.x()).scale(p).width(P).color(W.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!W[e].disabled})),q.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),B.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(W.filter(function(t){return!t.disabled})).call(o)),v&&(a.getData(e.y()).scale(f).width(T).color(W.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!W[e].disabled})),q.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),B.select(".nv-distributionY").attr("transform","translate("+(x?P:-a.size())+",0)").datum(W.filter(function(t){return!t.disabled})).call(a)),d3.fisheye&&(B.select(".nv-background").attr("width",P).attr("height",T),B.select(".nv-background").on("mousemove",A),B.select(".nv-background").on("click",function(){w=!w}),e.dispatch.on("elementClick.freezeFisheye",function(){w=!w})),s.dispatch.on("legendClick",function(r){r.disabled=!r.disabled,k=r.disabled?0:2.5,B.select(".nv-background").style("pointer-events",r.disabled?"none":"all"),B.select(".nv-point-paths").style("pointer-events",r.disabled?"all":"none"),r.disabled?(p.distortion(k).focus(0),f.distortion(k).focus(0),B.select(".nv-scatterWrap").call(e),B.select(".nv-x.nv-axis").call(n),B.select(".nv-y.nv-axis").call(i)):w=!1,t.update()}),r.dispatch.on("stateChange",function(e){D=e,L.stateChange(D),t.update()}),e.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos[1]-T),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+o.size()),t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],L.tooltipShow(t)}),L.on("tooltipShow",function(t){S&&R(t,M.parentNode)}),L.on("changeState",function(e){"undefined"!=typeof e.disabled&&(W.forEach(function(t,n){t.disabled=e.disabled[n]}),D.disabled=e.disabled),t.update()}),X=p.copy(),F=f.copy()}),t}var e=nv.models.scatter(),n=nv.models.axis(),i=nv.models.axis(),r=nv.models.legend(),s=nv.models.legend(),o=nv.models.distribution(),a=nv.models.distribution(),l={top:30,right:20,bottom:50,left:75},c=null,d=null,u=nv.utils.defaultColor(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.yScale(),g=!1,v=!1,h=!0,m=!0,y=!0,x=!1,b=!!d3.fisheye,k=0,w=!1,S=!0,W=function(t,e){return"<strong>"+e+"</strong>"},A=function(t,e,n){return"<strong>"+n+"</strong>"},C=function(t,e,n,i){return"<h3>"+t+"</h3>"+"<p>"+i+"</p>"},D={},I=null,L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z="No Data Available.",Y=250;e.xScale(p).yScale(f),n.orient("bottom").tickPadding(10),i.orient(x?"right":"left").tickPadding(10),o.axis("x"),a.axis("y"),s.updateState(!1);var X,F,R=function(r,s){var o=r.pos[0]+(s.offsetLeft||0),a=r.pos[1]+(s.offsetTop||0),c=r.pos[0]+(s.offsetLeft||0),d=f.range()[0]+l.top+(s.offsetTop||0),u=p.range()[0]+l.left+(s.offsetLeft||0),g=r.pos[1]+(s.offsetTop||0),v=n.tickFormat()(e.x()(r.point,r.pointIndex)),h=i.tickFormat()(e.y()(r.point,r.pointIndex));null!=W&&nv.tooltip.show([c,d],W(r.series.key,v,h,r,t),"n",1,s,"x-nvtooltip"),null!=A&&nv.tooltip.show([u,g],A(r.series.key,v,h,r,t),"e",1,s,"y-nvtooltip"),null!=C&&nv.tooltip.show([o,a],C(r.series.key,v,h,r.point.tooltip,r,t),r.value<0?"n":"s",null,s)},H=[{key:"Magnify",disabled:!0}];return e.dispatch.on("elementMouseout.tooltip",function(t){L.tooltipHide(t),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",a.size())}),L.on("tooltipHide",function(){S&&nv.tooltip.cleanup()}),t.dispatch=L,t.scatter=e,t.legend=r,t.controls=s,t.xAxis=n,t.yAxis=i,t.distX=o,t.distY=a,d3.rebind(t,e,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=nv.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(u=nv.utils.getColor(e),r.color(u),o.color(u),a.color(u),t):u},t.showDistX=function(e){return arguments.length?(g=e,t):g},t.showDistY=function(e){return arguments.length?(v=e,t):v},t.showControls=function(e){return arguments.length?(b=e,t):b},t.showLegend=function(e){return arguments.length?(h=e,t):h},t.showXAxis=function(e){return arguments.length?(m=e,t):m},t.showYAxis=function(e){return arguments.length?(y=e,t):y},t.rightAlignYAxis=function(e){return arguments.length?(x=e,i.orient(e?"right":"left"),t):x},t.fisheye=function(e){return arguments.length?(k=e,t):k},t.tooltips=function(e){return arguments.length?(S=e,t):S},t.tooltipContent=function(e){return arguments.length?(C=e,t):C},t.tooltipXContent=function(e){return arguments.length?(W=e,t):W},t.tooltipYContent=function(e){return arguments.length?(A=e,t):A},t.state=function(e){return arguments.length?(D=e,t):D},t.defaultState=function(e){return arguments.length?(I=e,t):I},t.noData=function(e){return arguments.length?(z=e,t):z},t.transitionDuration=function(e){return arguments.length?(Y=e,t):Y},t};