nv.models.multiBarTimeSeries=function(){"use strict";function t(k){return k.each(function(t){var k=s-u.left-u.right,M=l-u.top-u.bottom,I=d3.select(this);v&&(t=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(m)(t)),t=t.map(function(t,e){return t.values=t.values.map(function(t){return t.series=e,t}),t});var w=e&&n?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0}})});c.domain(e||d3.extent(d3.merge(w).map(function(t){return t.x}))).range(r||[0,k]),d.domain(n||d3.extent(d3.merge(w).map(function(t){return t.y+(v?t.y0:0)}).concat(h))).range(i||[M,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1])),o=o||c,a=a||d;var C=I.selectAll("g.nv-wrap.nv-multibar").data([t]),A=C.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),D=A.append("defs"),P=A.append("g"),S=C.select("g");P.append("g").attr("class","nv-groups"),C.attr("transform","translate("+u.left+","+u.top+")"),D.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect"),C.select("#nv-edge-clip-"+f+" rect").attr("width",k).attr("height",M),S.attr("clip-path",p?"url(#nv-edge-clip-"+f+")":"");var R=C.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});R.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(R.exit()).selectAll("rect.nv-bar").delay(function(e,n){return n*x/t[0].values.length}).attr("y",function(t){return v?a(t.y0):a(0)}).attr("height",0).remove(),R.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return y(t,e)}).style("stroke",function(t,e){return y(t,e)}),d3.transition(R).style("stroke-opacity",1).style("fill-opacity",.75);var z=R.selectAll("rect.nv-bar").data(function(t){return t.values});z.exit().remove();for(var B=0,E=0;E<w.length;E+=1)B=Math.max(w[E].length,B);var F=k/B-.1,T=F/t.length;z.enter().append("rect").attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,e,n){return v?0:e*F+n*T}).attr("y",function(t){return a(v?t.y0:0)}).attr("height",0).attr("width",v?F:T),z.on("mouseover",function(e,n){d3.select(this).classed("hover",!0),b.elementMouseover({value:m(e,n),point:e,series:t[e.series],pos:[c(g(e,n))+T*(v?t.length/2:e.series+.5)/t.length,d(m(e,n)+(v?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),b.elementMouseout({value:m(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){b.elementClick({value:m(e,n),point:e,series:t[e.series],pos:[c(g(e,n))+T*(v?t.length/2:e.series+.5)/t.length,d(m(e,n)+(v?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){b.elementDblClick({value:m(e,n),point:e,series:t[e.series],pos:[c(g(e,n))+T*(v?t.length/2:e.series+.5)/t.length,d(m(e,n)+(v?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),z.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+c(g(t,e))+",0)"}),v?d3.transition(z).delay(function(e,n){return n*x/t[0].values.length}).attr("y",function(t,e){return d(m(t,e)+(v?t.y0:0))}).attr("height",function(t){return Math.abs(d(t.y+(v?t.y0:0))-d(v?t.y0:0))}).each("end",function(){d3.transition(d3.select(this)).attr("x",function(t,e){return v?0:e*F+j*T}).attr("width",v?F:T)}):d3.transition(z).delay(function(e,n){return n*x/t[0].values.length}).attr("x",function(t){return t.series*T}).attr("width",T).each("end",function(){d3.transition(d3.select(this)).attr("y",function(t,e){return m(t,e)<0?d(0):d(m(t,e))}).attr("height",function(t,e){return Math.abs(d(m(t,e))-d(0))})}),o=c.copy(),a=d.copy()}),t}var e,n,r,i,o,a,u={top:0,right:0,bottom:0,left:0},s=960,l=500,c=d3.time.scale(),d=d3.scale.linear(),f=Math.floor(1e4*Math.random()),g=function(t){return t.x},m=function(t){return t.y},h=[0],p=!0,v=!1,y=nv.utils.defaultColor(),x=1200,b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=b,t.options=nv.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(n=e,t):n},t.xRange=function(e){return arguments.length?(r=e,t):r},t.yRange=function(e){return arguments.length?(i=e,t):i},t.forceY=function(e){return arguments.length?(h=e,t):h},t.stacked=function(e){return arguments.length?(v=e,t):v},t.clipEdge=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(y=nv.utils.getColor(e),t):y},t.id=function(e){return arguments.length?(f=e,t):f},t.delay=function(e){return arguments.length?(x=e,t):x},t};