nv.models.multiBar=function(){"use strict";function t(w){return w.each(function(t){var w=l-s.left-s.right,z=c-s.top-s.bottom,S=d3.select(this);k&&t.length&&(k=[{values:t[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),y&&(t=d3.layout.stack().offset(b).values(function(t){return t.values}).y(h)(!t.length&&k?k:t)),t=t.map(function(t,n){return t.values=t.values.map(function(t){return t.series=n,t}),t}),y&&t[0].values.map(function(n,e){var r=0,a=0;t.map(function(t){var n=t.values[e];n.size=Math.abs(n.y),n.y<0?(n.y1=a,a-=n.size):(n.y1=n.size+r,r+=n.size)})});var A=e&&r?[]:t.map(function(t){return t.values.map(function(t,n){return{x:m(t,n),y:h(t,n),y0:t.y0,y1:t.y1}})});g.domain(e||d3.merge(A).map(function(t){return t.x})).rangeBands(a||[0,w],C),d.domain(r||d3.extent(d3.merge(A).map(function(t){return y?t.y>0?t.y1:t.y1+t.y:t.y}).concat(p))).range(i||[z,0]),g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]-.01*g.domain()[0],g.domain()[1]+.01*g.domain()[1]]):g.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1])),u=u||g,o=o||d;var D=S.selectAll("g.nv-wrap.nv-multibar").data([t]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),R=P.append("defs"),E=P.append("g"),F=D.select("g");E.append("g").attr("class","nv-groups"),D.attr("transform","translate("+s.left+","+s.top+")"),R.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect"),D.select("#nv-edge-clip-"+f+" rect").attr("width",w).attr("height",z),F.attr("clip-path",v?"url(#nv-edge-clip-"+f+")":"");var O=D.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,n){return n});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),O.exit().transition().selectAll("rect.nv-bar").delay(function(n,e){return e*M/t[0].values.length}).attr("y",function(t){return y?o(t.y0):o(0)}).attr("height",0).remove(),O.attr("class",function(t,n){return"nv-group nv-series-"+n}).classed("hover",function(t){return t.hover}).style("fill",function(t,n){return x(t,n)}).style("stroke",function(t,n){return x(t,n)}),O.transition().style("stroke-opacity",1).style("fill-opacity",.75);var Y=O.selectAll("rect.nv-bar").data(function(n){return k&&!t.length?k.values:n.values});Y.exit().remove(),Y.enter().append("rect").attr("class",function(t,n){return h(t,n)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(n,e,r){return y?0:r*g.rangeBand()/t.length}).attr("y",function(t){return o(y?t.y0:0)}).attr("height",0).attr("width",g.rangeBand()/(y?1:t.length)).attr("transform",function(t,n){return"translate("+g(m(t,n))+",0)"}),Y.style("fill",function(t,n,e){return x(t,e,n)}).style("stroke",function(t,n,e){return x(t,e,n)}).on("mouseover",function(n,e){d3.select(this).classed("hover",!0),I.elementMouseover({value:h(n,e),point:n,series:t[n.series],pos:[g(m(n,e))+g.rangeBand()*(y?t.length/2:n.series+.5)/t.length,d(h(n,e)+(y?n.y0:0))],pointIndex:e,seriesIndex:n.series,e:d3.event})}).on("mouseout",function(n,e){d3.select(this).classed("hover",!1),I.elementMouseout({value:h(n,e),point:n,series:t[n.series],pointIndex:e,seriesIndex:n.series,e:d3.event})}).on("click",function(n,e){I.elementClick({value:h(n,e),point:n,series:t[n.series],pos:[g(m(n,e))+g.rangeBand()*(y?t.length/2:n.series+.5)/t.length,d(h(n,e)+(y?n.y0:0))],pointIndex:e,seriesIndex:n.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(n,e){I.elementDblClick({value:h(n,e),point:n,series:t[n.series],pos:[g(m(n,e))+g.rangeBand()*(y?t.length/2:n.series+.5)/t.length,d(h(n,e)+(y?n.y0:0))],pointIndex:e,seriesIndex:n.series,e:d3.event}),d3.event.stopPropagation()}),Y.attr("class",function(t,n){return h(t,n)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(t,n){return"translate("+g(m(t,n))+",0)"}),B&&(n||(n=t.map(function(){return!0})),Y.style("fill",function(t,e,r){return d3.rgb(B(t,e)).darker(n.map(function(t,n){return n}).filter(function(t,e){return!n[e]})[r]).toString()}).style("stroke",function(t,e,r){return d3.rgb(B(t,e)).darker(n.map(function(t,n){return n}).filter(function(t,e){return!n[e]})[r]).toString()})),y?Y.transition().delay(function(n,e){return e*M/t[0].values.length}).attr("y",function(t){return d(y?t.y1:0)}).attr("height",function(t){return Math.max(Math.abs(d(t.y+(y?t.y0:0))-d(y?t.y0:0)),1)}).attr("x",function(n){return y?0:n.series*g.rangeBand()/t.length}).attr("width",g.rangeBand()/(y?1:t.length)):Y.transition().delay(function(n,e){return e*M/t[0].values.length}).attr("x",function(n){return n.series*g.rangeBand()/t.length}).attr("width",g.rangeBand()/t.length).attr("y",function(t,n){return h(t,n)<0?d(0):d(0)-d(h(t,n))<1?d(0)-1:d(h(t,n))||0}).attr("height",function(t,n){return Math.max(Math.abs(d(h(t,n))-d(0)),1)||0}),u=g.copy(),o=d.copy()}),t}var n,e,r,a,i,u,o,s={top:0,right:0,bottom:0,left:0},l=960,c=500,g=d3.scale.ordinal(),d=d3.scale.linear(),f=Math.floor(1e4*Math.random()),m=function(t){return t.x},h=function(t){return t.y},p=[0],v=!0,y=!1,b="zero",x=nv.utils.defaultColor(),k=!1,B=null,M=1200,C=.1,I=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=I,t.options=nv.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(m=n,t):m},t.y=function(n){return arguments.length?(h=n,t):h},t.margin=function(n){return arguments.length?(s.top="undefined"!=typeof n.top?n.top:s.top,s.right="undefined"!=typeof n.right?n.right:s.right,s.bottom="undefined"!=typeof n.bottom?n.bottom:s.bottom,s.left="undefined"!=typeof n.left?n.left:s.left,t):s},t.width=function(n){return arguments.length?(l=n,t):l},t.height=function(n){return arguments.length?(c=n,t):c},t.xScale=function(n){return arguments.length?(g=n,t):g},t.yScale=function(n){return arguments.length?(d=n,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(n){return arguments.length?(r=n,t):r},t.xRange=function(n){return arguments.length?(a=n,t):a},t.yRange=function(n){return arguments.length?(i=n,t):i},t.forceY=function(n){return arguments.length?(p=n,t):p},t.stacked=function(n){return arguments.length?(y=n,t):y},t.stackOffset=function(n){return arguments.length?(b=n,t):b},t.clipEdge=function(n){return arguments.length?(v=n,t):v},t.color=function(n){return arguments.length?(x=nv.utils.getColor(n),t):x},t.barColor=function(n){return arguments.length?(B=nv.utils.getColor(n),t):B},t.disabled=function(e){return arguments.length?(n=e,t):n},t.id=function(n){return arguments.length?(f=n,t):f},t.hideable=function(n){return arguments.length?(k=n,t):k},t.delay=function(n){return arguments.length?(M=n,t):M},t.groupSpacing=function(n){return arguments.length?(C=n,t):C},t};