nv.models.discreteBar=function(){"use strict";function e(c){return c.each(function(e){var c=u-i.left-i.right,k=l-i.top-i.bottom,B=d3.select(this);e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var C=t&&n?[]:e.map(function(e){return e.values.map(function(e,t){return{x:f(e,t),y:p(e,t),y0:e.y0}})});g.domain(t||d3.merge(C).map(function(e){return e.x})).rangeBands(r||[0,c],.1),d.domain(n||d3.extent(d3.merge(C).map(function(e){return e.y}).concat(m))),v?d.range(o||[k-(d.domain()[0]<0?12:0),d.domain()[1]>0?12:0]):d.range(o||[k,0]),a=a||g,s=s||d.copy().range([d(0),d(0)]);var I=B.selectAll("g.nv-wrap.nv-discretebar").data([e]),M=I.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),w=M.append("g");I.select("g"),w.append("g").attr("class","nv-groups"),I.attr("transform","translate("+i.left+","+i.top+")");var A=I.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});A.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),A.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),A.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),A.transition().style("stroke-opacity",1).style("fill-opacity",.75);var D=A.selectAll("g.nv-bar").data(function(e){return e.values});D.exit().remove();var F=D.enter().append("g").attr("transform",function(e,t){return"translate("+(g(f(e,t))+.05*g.rangeBand())+", "+d(0)+")"}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),x.elementMouseover({value:p(t,n),point:t,series:e[t.series],pos:[g(f(t,n))+g.rangeBand()*(t.series+.5)/e.length,d(p(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),x.elementMouseout({value:p(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){x.elementClick({value:p(t,n),point:t,series:e[t.series],pos:[g(f(t,n))+g.rangeBand()*(t.series+.5)/e.length,d(p(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){x.elementDblClick({value:p(t,n),point:t,series:e[t.series],pos:[g(f(t,n))+g.rangeBand()*(t.series+.5)/e.length,d(p(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()});F.append("rect").attr("height",0).attr("width",.9*g.rangeBand()/e.length),v?(F.append("text").attr("text-anchor","middle"),D.select("text").text(function(e,t){return y(p(e,t))}).transition().attr("x",.9*g.rangeBand()/2).attr("y",function(e,t){return p(e,t)<0?d(p(e,t))-d(0)+12:-4})):D.selectAll("text").remove(),D.attr("class",function(e,t){return p(e,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(e,t){return e.color||h(e,t)}).style("stroke",function(e,t){return e.color||h(e,t)}).select("rect").attr("class",b).transition().attr("width",.9*g.rangeBand()/e.length),D.transition().attr("transform",function(e,t){var n=g(f(e,t))+.05*g.rangeBand(),r=p(e,t)<0?d(0):d(0)-d(p(e,t))<1?d(0)-1:d(p(e,t));return"translate("+n+", "+r+")"}).select("rect").attr("height",function(e,t){return Math.max(Math.abs(d(p(e,t))-d(n&&n[0]||0))||1)}),a=g.copy(),s=d.copy()}),e}var t,n,r,o,a,s,i={top:0,right:0,bottom:0,left:0},u=960,l=500,c=Math.floor(1e4*Math.random()),g=d3.scale.ordinal(),d=d3.scale.linear(),f=function(e){return e.x},p=function(e){return e.y},m=[0],h=nv.utils.defaultColor(),v=!1,y=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),b="discreteBar";return e.dispatch=x,e.options=nv.utils.optionsFunc.bind(e),e.x=function(t){return arguments.length?(f=t,e):f},e.y=function(t){return arguments.length?(p=t,e):p},e.margin=function(t){return arguments.length?(i.top="undefined"!=typeof t.top?t.top:i.top,i.right="undefined"!=typeof t.right?t.right:i.right,i.bottom="undefined"!=typeof t.bottom?t.bottom:i.bottom,i.left="undefined"!=typeof t.left?t.left:i.left,e):i},e.width=function(t){return arguments.length?(u=t,e):u},e.height=function(t){return arguments.length?(l=t,e):l},e.xScale=function(t){return arguments.length?(g=t,e):g},e.yScale=function(t){return arguments.length?(d=t,e):d},e.xDomain=function(n){return arguments.length?(t=n,e):t},e.yDomain=function(t){return arguments.length?(n=t,e):n},e.xRange=function(t){return arguments.length?(r=t,e):r},e.yRange=function(t){return arguments.length?(o=t,e):o},e.forceY=function(t){return arguments.length?(m=t,e):m},e.color=function(t){return arguments.length?(h=nv.utils.getColor(t),e):h},e.id=function(t){return arguments.length?(c=t,e):c},e.showValues=function(t){return arguments.length?(v=t,e):v},e.valueFormat=function(t){return arguments.length?(y=t,e):y},e.rectClass=function(t){return arguments.length?(b=t,e):b},e};