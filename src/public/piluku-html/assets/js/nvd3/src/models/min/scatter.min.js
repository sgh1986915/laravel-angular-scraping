nv.models.scatter=function(){"use strict";function n(F){return F.each(function(n){function F(){if(!N)return!1;var t=d3.merge(n.map(function(n,t){return n.values.map(function(n,e){var r=d(n,e),o=g(n,e);return[c(r)+1e-7*Math.random(),p(o)+1e-7*Math.random(),t,e,n]}).filter(function(n,t){return I(n[4],t)})}));if(V===!0){if(P){var e=X.select("defs").selectAll(".nv-point-clips").data([l]).enter();e.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+l);var r=X.select("#nv-points-clip-"+l).selectAll("circle").data(t);r.enter().append("circle").attr("r",Z),r.exit().remove(),r.attr("cx",function(n){return n[0]}).attr("cy",function(n){return n[1]}),X.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+l+")")}t.length&&(t.push([c.range()[0]-20,p.range()[0]-20,null,null]),t.push([c.range()[1]+20,p.range()[1]+20,null,null]),t.push([c.range()[0]-20,p.range()[0]+20,null,null]),t.push([c.range()[1]+20,p.range()[1]-20,null,null]));var o=d3.geom.polygon([[-10,-10],[-10,a+10],[u+10,a+10],[u+10,-10]]),s=d3.geom.voronoi(t).map(function(n,e){return{data:o.clip(n),series:t[e][2],point:t[e][3]}}),f=X.select(".nv-point-paths").selectAll("path").data(s);f.enter().append("path").attr("class",function(n,t){return"nv-path-"+t}),f.exit().remove(),f.attr("d",function(n){return 0===n.data.length?"M 0 0":"M"+n.data.join("L")+"Z"});var m=function(t,e){if(j)return 0;var r=n[t.series];if("undefined"!=typeof r){var o=r.values[t.point];e({point:o,series:r,pos:[c(d(o,t.point))+i.left,p(g(o,t.point))+i.top],seriesIndex:t.series,pointIndex:t.point})}};f.on("click",function(n){m(n,T.elementClick)}).on("mouseover",function(n){m(n,T.elementMouseover)}).on("mouseout",function(n){m(n,T.elementMouseout)})}else X.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,e){if(j||!n[t.series])return 0;var r=n[t.series],o=r.values[e];T.elementClick({point:o,series:r,pos:[c(d(o,e))+i.left,p(g(o,e))+i.top],seriesIndex:t.series,pointIndex:e})}).on("mouseover",function(t,e){if(j||!n[t.series])return 0;var r=n[t.series],o=r.values[e];T.elementMouseover({point:o,series:r,pos:[c(d(o,e))+i.left,p(g(o,e))+i.top],seriesIndex:t.series,pointIndex:e})}).on("mouseout",function(t,e){if(j||!n[t.series])return 0;var r=n[t.series],o=r.values[e];T.elementMouseout({point:o,series:r,seriesIndex:t.series,pointIndex:e})});j=!1}var H=u-i.left-i.right,K=a-i.top-i.bottom,L=d3.select(this);n.forEach(function(n,t){n.values.forEach(function(n){n.series=t})});var O=C&&D&&S?[]:d3.merge(n.map(function(n){return n.values.map(function(n,t){return{x:d(n,t),y:g(n,t),size:m(n,t)}})}));c.domain(C||d3.extent(O.map(function(n){return n.x}).concat(y))),k&&n[0]?c.range(w||[(H*z+H)/(2*n[0].values.length),H-H*(1+z)/(2*n[0].values.length)]):c.range(w||[0,H]),p.domain(D||d3.extent(O.map(function(n){return n.y}).concat(x))).range(R||[K,0]),f.domain(S||d3.extent(O.map(function(n){return n.size}).concat(M))).range(E||[16,256]),(c.domain()[0]===c.domain()[1]||p.domain()[0]===p.domain()[1])&&(q=!0),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1])),isNaN(c.domain()[0])&&c.domain([-1,1]),isNaN(p.domain()[0])&&p.domain([-1,1]),t=t||c,e=e||p,r=r||f;var X=L.selectAll("g.nv-wrap.nv-scatter").data([n]),Y=X.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+l+(q?" nv-single-point":"")),B=Y.append("defs"),G=Y.append("g"),J=X.select("g");G.append("g").attr("class","nv-groups"),G.append("g").attr("class","nv-point-paths"),X.attr("transform","translate("+i.left+","+i.top+")"),B.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),X.select("#nv-edge-clip-"+l+" rect").attr("width",H).attr("height",K),J.attr("clip-path",b?"url(#nv-edge-clip-"+l+")":""),j=!0;var Q=X.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});if(Q.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Q.exit().remove(),Q.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}),Q.transition().style("fill",function(n,t){return s(n,t)}).style("stroke",function(n,t){return s(n,t)}).style("stroke-opacity",1).style("fill-opacity",.5),v){var U=Q.selectAll("circle.nv-point").data(function(n){return n.values},A);U.enter().append("circle").style("fill",function(n){return n.color}).style("stroke",function(n){return n.color}).attr("cx",function(n,e){return nv.utils.NaNtoZero(t(d(n,e)))}).attr("cy",function(n,t){return nv.utils.NaNtoZero(e(g(n,t)))}).attr("r",function(n,t){return Math.sqrt(f(m(n,t))/Math.PI)}),U.exit().remove(),Q.exit().selectAll("path.nv-point").transition().attr("cx",function(n,t){return nv.utils.NaNtoZero(c(d(n,t)))}).attr("cy",function(n,t){return nv.utils.NaNtoZero(p(g(n,t)))}).remove(),U.each(function(n,t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t,!0).classed("hover",!1)}),U.transition().attr("cx",function(n,t){return nv.utils.NaNtoZero(c(d(n,t)))}).attr("cy",function(n,t){return nv.utils.NaNtoZero(p(g(n,t)))}).attr("r",function(n,t){return Math.sqrt(f(m(n,t))/Math.PI)})}else{var U=Q.selectAll("path.nv-point").data(function(n){return n.values});U.enter().append("path").style("fill",function(n){return n.color}).style("stroke",function(n){return n.color}).attr("transform",function(n,r){return"translate("+t(d(n,r))+","+e(g(n,r))+")"}).attr("d",d3.svg.symbol().type(h).size(function(n,t){return f(m(n,t))})),U.exit().remove(),Q.exit().selectAll("path.nv-point").transition().attr("transform",function(n,t){return"translate("+c(d(n,t))+","+p(g(n,t))+")"}).remove(),U.each(function(n,t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t,!0).classed("hover",!1)}),U.transition().attr("transform",function(n,t){return"translate("+c(d(n,t))+","+p(g(n,t))+")"}).attr("d",d3.svg.symbol().type(h).size(function(n,t){return f(m(n,t))}))}clearTimeout(o),o=setTimeout(F,300),t=c.copy(),e=p.copy(),r=f.copy()}),n}var t,e,r,o,i={top:0,right:0,bottom:0,left:0},u=960,a=500,s=nv.utils.defaultColor(),l=Math.floor(1e5*Math.random()),c=d3.scale.linear(),p=d3.scale.linear(),f=d3.scale.linear(),d=function(n){return n.x},g=function(n){return n.y},m=function(n){return n.size||1},h=function(n){return n.shape||"circle"},v=!0,y=[],x=[],M=[],N=!0,A=null,I=function(n){return!n.notActive},k=!1,z=.1,b=!1,P=!0,Z=function(){return 25},C=null,D=null,w=null,R=null,S=null,E=null,q=!1,T=d3.dispatch("elementClick","elementMouseover","elementMouseout"),V=!0,j=!1;return n.clearHighlights=function(){d3.selectAll(".nv-chart-"+l+" .nv-point.hover").classed("hover",!1)},n.highlightPoint=function(n,t,e){d3.select(".nv-chart-"+l+" .nv-series-"+n+" .nv-point-"+t).classed("hover",e)},T.on("elementMouseover.point",function(t){N&&n.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),T.on("elementMouseout.point",function(t){N&&n.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),n.dispatch=T,n.options=nv.utils.optionsFunc.bind(n),n.x=function(t){return arguments.length?(d=d3.functor(t),n):d},n.y=function(t){return arguments.length?(g=d3.functor(t),n):g},n.size=function(t){return arguments.length?(m=d3.functor(t),n):m},n.margin=function(t){return arguments.length?(i.top="undefined"!=typeof t.top?t.top:i.top,i.right="undefined"!=typeof t.right?t.right:i.right,i.bottom="undefined"!=typeof t.bottom?t.bottom:i.bottom,i.left="undefined"!=typeof t.left?t.left:i.left,n):i},n.width=function(t){return arguments.length?(u=t,n):u},n.height=function(t){return arguments.length?(a=t,n):a},n.xScale=function(t){return arguments.length?(c=t,n):c},n.yScale=function(t){return arguments.length?(p=t,n):p},n.zScale=function(t){return arguments.length?(f=t,n):f},n.xDomain=function(t){return arguments.length?(C=t,n):C},n.yDomain=function(t){return arguments.length?(D=t,n):D},n.sizeDomain=function(t){return arguments.length?(S=t,n):S},n.xRange=function(t){return arguments.length?(w=t,n):w},n.yRange=function(t){return arguments.length?(R=t,n):R},n.sizeRange=function(t){return arguments.length?(E=t,n):E},n.forceX=function(t){return arguments.length?(y=t,n):y},n.forceY=function(t){return arguments.length?(x=t,n):x},n.forceSize=function(t){return arguments.length?(M=t,n):M},n.interactive=function(t){return arguments.length?(N=t,n):N},n.pointKey=function(t){return arguments.length?(A=t,n):A},n.pointActive=function(t){return arguments.length?(I=t,n):I},n.padData=function(t){return arguments.length?(k=t,n):k},n.padDataOuter=function(t){return arguments.length?(z=t,n):z},n.clipEdge=function(t){return arguments.length?(b=t,n):b},n.clipVoronoi=function(t){return arguments.length?(P=t,n):P},n.useVoronoi=function(t){return arguments.length?(V=t,V===!1&&(P=!1),n):V},n.clipRadius=function(t){return arguments.length?(Z=t,n):Z},n.color=function(t){return arguments.length?(s=nv.utils.getColor(t),n):s},n.shape=function(t){return arguments.length?(h=t,n):h},n.onlyCircles=function(t){return arguments.length?(v=t,n):v},n.id=function(t){return arguments.length?(l=t,n):l},n.singlePoint=function(t){return arguments.length?(q=t,n):q},n};