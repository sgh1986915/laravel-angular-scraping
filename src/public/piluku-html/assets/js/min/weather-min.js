function init(){getWoeid(selectedCity),$("#city").keypress(function(e){13==e.which&&(selectedCity=$("#city").val(),getWoeid(selectedCity),$("#city").blur())}),$("#temp").click(function(){unit="F"==$("#temp").html()?"c":"f",$("#temp").html(unit.toUpperCase()),getWoeid(selectedCity)}),$("#city").focus(function(e){placeholder=$("#city").val(),$("#city").val("")}),$("#city").blur(function(e){""==$("#city").val()&&$("#city").val(placeholder)})}function getWoeid(e){var a='select woeid from geo.placefinder where text="'+e+'"&format=json',r=baseYahooURL+a;$.getJSON(r,woeidDownloaded)}function woeidDownloaded(e){var a=null;if(e.query.count<=0){$("#city").val("No city found"),$("#deg").html(""),setImage(999,$("#big")[0]);for(var r=0;3>=r;r++)$("#forecast"+r).html(""),setImage(999,$("#forecastimg"+r)[0]),$("#forecastdeg"+r).html("")}else a=1==e.query.count?e.query.results.Result.woeid:e.query.results.Result[0].woeid,getWeatherInfo(a)}function getWeatherInfo(e){var a="select * from weather.forecast where woeid="+e+' and u = "'+unit+'" &format=json',r=baseYahooURL+a;$.getJSON(r,weaterInfoDownloaded)}function weaterInfoDownloaded(e){$("#city").val(e.query.results.channel.location.city),$("#deg").html(e.query.results.channel.item.condition.temp+"°"+unit.toUpperCase()),setImage(e.query.results.channel.item.condition.code,$("#big")[0]);for(var a=0;3>=a;a++){var r=e.query.results.channel.item.forecast[a];$("#forecast"+a).html(r.day),setImage(r.code,$("#forecastimg"+a)[0]),$("#forecastdeg"+a).html((parseInt(r.low)+parseInt(r.high))/2+" °"+unit.toUpperCase())}}function setImage(e,a){switch(a.src="../assets/images/",parseInt(e)){case 0:a.src+="weather/Tornado.svg";break;case 1:a.src+="weather/Cloud-Lightning.svg";break;case 2:a.src+="weather/Wind.svg";break;case 3:a.src+="weather/Cloud-Lightning.svg";break;case 4:a.src+="weather/Cloud-Lightning.svg";break;case 5:a.src+="weather/Cloud-Snow-Alt.svg";break;case 6:a.src+="weather/Cloud-Rain-Alt.svg";break;case 7:a.src+="weather/Cloud-Snow-Alt.svg";break;case 8:a.src+="weather/Cloud-Drizzle-Alt.svg";break;case 9:a.src+="weather/Cloud-Drizzle-Alt.svg";break;case 10:a.src+="weather/Cloud-Drizzle-Alt.svg";break;case 11:a.src+="weather/Cloud-Drizzle-Alt.svg";break;case 12:a.src+="weather/Cloud-Drizzle-Alt.svg";break;case 13:a.src+="weather/Cloud-Snow-Alt.svg";break;case 14:a.src+="weather/Cloud-Snow-Alt.svg";break;case 15:a.src+="weather/Cloud-Snow-Alt.svg";break;case 16:a.src+="weather/Cloud-Snow-Alt.svg";break;case 17:a.src+="weather/Cloud-Hail-Alt.svg";break;case 18:a.src+="weather/Cloud-Hail-Alt.svg";break;case 19:a.src+="weather/Cloud-Hail-Alt.svg";break;case 20:a.src+="weather/Cloud-Fog.svg";break;case 21:a.src+="weather/Cloud-Fog.svg";break;case 22:a.src+="weather/Cloud-Fog.svg";break;case 23:a.src+="weather/Cloud-Fog.svg";break;case 24:a.src+="weather/Wind.svg";break;case 25:a.src+="weather/Thermometer-Zero";break;case 26:a.src+="weather/Cloud.svg";break;case 27:a.src+="weather/Cloud-Moon.svg";break;case 28:a.src+="weather/Cloud.svg";break;case 29:a.src+="weather/Cloud-Moon.svg";break;case 30:a.src+="weather/Cloud-Sun.svg";break;case 31:a.src+="weather/Moon.svg";break;case 32:a.src+="weather/Sun.svg";break;case 33:a.src+="weather/Moon.svg";break;case 34:a.src+="weather/Sun.svg";break;case 35:a.src+="weather/Cloud-Hail-Alt.svg";break;case 36:a.src+="weather/Sun.svg";break;case 37:a.src+="weather/Cloud-Lightning.svg";break;case 38:a.src+="weather/Cloud-Lightning.svg";break;case 39:a.src+="weather/Cloud-Lightning.svg";break;case 40:a.src+="weather/Cloud-Rain.svg";break;case 41:a.src+="weather/Cloud-Snow-Alt.svg";break;case 42:a.src+="weather/Cloud-Snow-Alt.svg";break;case 43:a.src+="weather/Cloud-Snow-Alt.svg";break;case 44:a.src+="weather/Cloud.svg";break;case 45:a.src+="weather/Cloud-Lightning.svg";break;case 46:a.src+="weather/Cloud-Snow-Alt.svg";break;case 47:a.src+="weather/Cloud-Lightning.svg";break;case 3200:a.src+="weather/Moon-New.svg";break;case 999:a.src+="weather/Compass.svg";break;default:a.src+="weather/Moon-New.svg"}}var baseYahooURL="https://query.yahooapis.com/v1/public/yql?q=",selectedCity="New York",placeholder="",unit="f";init();